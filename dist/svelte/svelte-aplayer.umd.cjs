(function(L,Te){typeof exports=="object"&&typeof module<"u"?module.exports=Te():typeof define=="function"&&define.amd?define(Te):(L=typeof globalThis<"u"?globalThis:L||self,L.Aplayer=Te())})(this,function(){"use strict";function L(){}function Te(e,t){for(const n in t)e[n]=t[n];return e}function $e(e){return e()}function et(){return Object.create(null)}function Ee(e){e.forEach($e)}function H(e){return typeof e=="function"}function tt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function _t(e){return Object.keys(e).length===0}function nt(e,...t){if(e==null)return L;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Z(e,t,n){e.$$.on_destroy.push(nt(t,n))}function lt(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function q(e,t,n){return e.set(n),t}function a(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function yt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function bt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function te(e){return document.createTextNode(e)}function I(){return te(" ")}function me(){return te("")}function A(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function wt(e){return Array.from(e.childNodes)}function pe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function V(e,t,n,l){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function re(e,t,n){e.classList[n?"add":"remove"](t)}function kt(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,l,t),i}class ge{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,l=null){this.e||(this.is_svg?this.e=bt(n.nodeName):this.e=v(n.nodeName),this.t=n,this.c(t)),this.i(l)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)O(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(P)}}let je;function Oe(e){je=e}function Fe(){if(!je)throw new Error("Function called outside component initialization");return je}function zt(e){Fe().$$.on_mount.push(e)}function Mt(e){Fe().$$.on_destroy.push(e)}function xt(){const e=Fe();return(t,n,{cancelable:l=!1}={})=>{const i=e.$$.callbacks[t];if(i){const c=kt(t,n,{cancelable:l});return i.slice().forEach(u=>{u.call(e,c)}),!c.defaultPrevented}return!0}}const Le=[],Se=[],We=[],it=[],Tt=Promise.resolve();let Ke=!1;function Et(){Ke||(Ke=!0,Tt.then(st))}function Qe(e){We.push(e)}const Ze=new Set;let qe=0;function st(){if(qe!==0)return;const e=je;do{try{for(;qe<Le.length;){const t=Le[qe];qe++,Oe(t),Lt(t.$$)}}catch(t){throw Le.length=0,qe=0,t}for(Oe(null),Le.length=0,qe=0;Se.length;)Se.pop()();for(let t=0;t<We.length;t+=1){const n=We[t];Ze.has(n)||(Ze.add(n),n())}We.length=0}while(Le.length);for(;it.length;)it.pop()();Ke=!1,Ze.clear(),Oe(e)}function Lt(e){if(e.fragment!==null){e.update(),Ee(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qe)}}const St=new Set;function rt(e,t){e&&e.i&&(St.delete(e),e.i(t))}function qt(e,t){e.d(1),t.delete(e.key)}function At(e,t,n,l,i,c,u,s,h,r,f,_){let y=e.length,b=c.length,k=y;const D={};for(;k--;)D[e[k].key]=k;const m=[],p=new Map,w=new Map;for(k=b;k--;){const E=_(i,c,k),S=n(E);let d=u.get(S);d?l&&d.p(E,t):(d=r(S,E),d.c()),p.set(S,m[k]=d),S in D&&w.set(S,Math.abs(k-D[S]))}const T=new Set,G=new Set;function K(E){rt(E,1),E.m(s,f),u.set(E.key,E),f=E.first,b--}for(;y&&b;){const E=m[b-1],S=e[y-1],d=E.key,z=S.key;E===S?(f=E.first,y--,b--):p.has(z)?!u.has(d)||T.has(d)?K(E):G.has(z)?y--:w.get(d)>w.get(z)?(G.add(d),K(E)):(T.add(z),y--):(h(S,u),y--)}for(;y--;){const E=e[y];p.has(E.key)||h(E,u)}for(;b;)K(m[b-1]);return m}function Dt(e,t,n,l){const{fragment:i,after_update:c}=e.$$;i&&i.m(t,n),l||Qe(()=>{const u=e.$$.on_mount.map($e).filter(H);e.$$.on_destroy?e.$$.on_destroy.push(...u):Ee(u),e.$$.on_mount=[]}),c.forEach(Qe)}function It(e,t){const n=e.$$;n.fragment!==null&&(Ee(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(e,t){e.$$.dirty[0]===-1&&(Le.push(e),Et(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ht(e,t,n,l,i,c,u,s=[-1]){const h=je;Oe(e);const r=e.$$={fragment:null,ctx:[],props:c,update:L,not_equal:i,bound:et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:et(),dirty:s,skip_bound:!1,root:t.target||h.$$.root};u&&u(r.root);let f=!1;if(r.ctx=n?n(e,t.props||{},(_,y,...b)=>{const k=b.length?b[0]:y;return r.ctx&&i(r.ctx[_],r.ctx[_]=k)&&(!r.skip_bound&&r.bound[_]&&r.bound[_](k),f&&Bt(e,_)),y}):[],r.update(),f=!0,Ee(r.before_update),r.fragment=l?l(r.ctx):!1,t.target){if(t.hydrate){const _=wt(t.target);r.fragment&&r.fragment.l(_),_.forEach(P)}else r.fragment&&r.fragment.c();t.intro&&rt(e.$$.fragment),Dt(e,t.target,t.anchor,t.customElement),st()}Oe(h)}class Pt{$destroy(){It(this,1),this.$destroy=L}$on(t,n){if(!H(n))return L;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!_t(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ae=[];function Nt(e,t){return{subscribe:De(e,t).subscribe}}function De(e,t=L){let n;const l=new Set;function i(s){if(tt(e,s)&&(e=s,n)){const h=!Ae.length;for(const r of l)r[1](),Ae.push(r,e);if(h){for(let r=0;r<Ae.length;r+=2)Ae[r][0](Ae[r+1]);Ae.length=0}}}function c(s){i(s(e))}function u(s,h=L){const r=[s,h];return l.add(r),l.size===1&&(n=t(i)||L),s(e),()=>{l.delete(r),l.size===0&&(n(),n=null)}}return{set:i,update:c,subscribe:u}}function ve(e,t,n){const l=!Array.isArray(e),i=l?[e]:e,c=t.length<2;return Nt(n,u=>{let s=!1;const h=[];let r=0,f=L;const _=()=>{if(r)return;f();const b=t(l?h[0]:h,u);c?u(b):f=H(b)?b:L},y=i.map((b,k)=>nt(b,D=>{h[k]=D,r&=~(1<<k),s&&_()},()=>{r|=1<<k}));return s=!0,_(),function(){Ee(y),f()}})}const ot=e=>{const t=c=>c<10?"0"+c:""+c,n=Math.floor(e/3600),l=Math.floor((e-n*3600)/60),i=Math.floor(e-n*3600-l*60);return(n>0?[n,l,i]:[l,i]).map(t).join(":")},Ct=/mobile/i.test(window.navigator.userAgent);function at(e){if(e){e=e.replace(/([^\]^\n])\[/g,(i,c)=>c+`
[`);const t=e.split(`
`);let n=[];const l=t.length;for(let i=0;i<l;i++){const c=t[i].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),u=t[i].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(c){const s=c.length;for(let h=0;h<s;h++){const r=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(c[h]),f=r[1]*60,_=parseInt(r[2]),y=r[4]?parseInt(r[4])/((r[4]+"").length===2?100:1e3):0,b=f+_+y;n.push([b,u])}}}return n=n.filter(i=>i[1]),n.sort((i,c)=>i[0]-c[0]),n}else return[]}function jt(e,t){const n=e[t];return!(n==null||n==="false")}console.log(`
 %c Svelte APlayer v0.1.1 %c http://svelte-aplayer.js.org 

`,"color: #fff; background: #ff3e00; padding:5px 0;","background: #fadfa3; padding:5px 0;");const ut=[];function Ot(e){const t=document.createElement("audio");ut.push(t),Rt(t,e);let n=De(0),l=De(NaN);const i=ve([n,l],([m,p])=>{let w=m/p;return w=Math.max(w,0),w=Math.min(w,1),w*=100,{ptime:ot(m),duration:ot(p),playPercentage:`${w}%`}});let c=De(0);const u=ve([c,l],([m,p])=>{let w=m/p;return w=Math.max(w,0),w=Math.min(w,1),w*=100,{bufferPercentage:`${w}%`,bufTime:m}}),s=De({playingIndex:0,audio:[]}),h=ve(s,m=>m.audio),r=De({volume:.7,loop:"all",order:"list",showList:!0}),f=ve(r,m=>({volumePercentage:`${m.volume*100}%`,muted:m.volume===0})),_=ve(s,m=>m.audio[m.playingIndex]),y=ve([u,n],([{bufTime:m},p])=>t.paused?!1:t.readyState<=HTMLMediaElement.HAVE_CURRENT_DATA||m-p<2&&t.readyState===HTMLMediaElement.HAVE_FUTURE_DATA),b=ve(_,(m,p)=>{if(!m||!m.lrc){p([]);return}const w=m.lrc;w.startsWith("http")?fetch(w).then(T=>{if(!T.ok)throw new Error(`${T.statusText} canot loading lrc from ${w}`);return T.text()}).then(T=>{p(at(T))}).catch(T=>{throw p([]),console.error(T),T}):p(at(w))},[]);let k=!1;_.subscribe(m=>{k&&e("listswitch",m),k=!0});let D=!1;return h.subscribe(m=>{D&&e("listchange",m),D=!0}),b.subscribe(m=>{m.length>0?e("lrcshow"):e("lrchide")}),{player:t,playList:s,audioList:h,currentSong:_,rdTime:i,currentTime:n,duration:l,rdBufTime:u,wtBufTime:c,loading:y,lrc:b,controlState:r,volumeState:f}}function Rt(e,t){["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"].forEach(l=>{e.addEventListener(l,i=>{t(l,i)})})}function Yt(e,t){let n=!1;return{volumeDragStart:()=>{n=!0},volumeDragMove:u=>{if(n){let s=1-((u.clientY||u.changedTouches[0].clientY)-t.getBoundingClientRect().top)/t.clientHeight;s=Math.max(s,0),s=Math.min(s,1),e.volume=s}},volumeDragEnd:u=>{if(n){let s=1-((u.clientY||u.changedTouches[0].clientY)-t.getBoundingClientRect().top)/t.clientHeight;s=Math.max(s,0),s=Math.min(s,1),e.volume=s,n=!1}}}}function Ut(e,t){let n=!1;return{progressDragStart:()=>{n=!0},progressDragMove:u=>{if(n){let s=((u.clientX||u.changedTouches[0].clientX)-t.getBoundingClientRect().left)/t.clientWidth;s=Math.max(s,0),s=Math.min(s,1),e.currentTime=e.duration*s}},progressDragEnd:u=>{if(n){n=!1;let s=((u.clientX||u.changedTouches[0].clientX)-t.getBoundingClientRect().left)/t.clientWidth;s=Math.max(s,0),s=Math.min(s,1),e.currentTime=e.duration*s}}}}const Xt=`<svg
                  xmlns="http://www.w3.org/2000/svg"
                  version="1.1"
                  viewBox="0 0 28 32"
                  ><path
                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"
                  /></svg
        >`,Ft=`<svg
                  xmlns="http://www.w3.org/2000/svg"
                  version="1.1"
                  viewBox="0 0 28 32"
                  ><path
                    d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"
                  /></svg
                >`,Wt=`<svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                viewBox="0 0 32 32"
                ><path
                  d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"
                /></svg
              >`,Vt=`<svg
                    xmlns="http://www.w3.org/2000/svg"
                    version="1.1"
                    viewBox="0 0 32 32"
                    ><path
                      d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"
                    /></svg
                  >`,Jt=`<svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                viewBox="0 0 32 32"
                ><path
                  d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"
                /></svg
              >`,Gt=`<svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                viewBox="0 0 33 32"
                ><path
                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"
                /></svg
              >`,Kt=` <svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                viewBox="0 0 29 32"
                ><path
                  d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"
                /></svg
              >`,Qt=`<svg
                xmlns="http://www.w3.org/2000/svg"
                version="1.1"
                viewBox="0 0 29 32"
                ><path
                  d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"
                /></svg
              >`,fn="";function ct(e,t,n){const l=e.slice();return l[72]=t[n],l[74]=n,l}function ft(e,t,n){const l=e.slice();return l[75]=t[n],l[77]=n,l}function Zt(e){let t;return{c(){t=v("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 31" class="svelte-afaxzx"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z" class="svelte-afaxzx"></path></svg>',g(t,"class","aplayer-button aplayer-play svelte-afaxzx")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function $t(e){let t;return{c(){t=v("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32" class="svelte-afaxzx"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z" class="svelte-afaxzx"></path></svg>',g(t,"class","aplayer-button aplayer-pause svelte-afaxzx")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function dt(e){let t,n,l=[],i=new Map,c=e[5];const u=s=>s[75][0];for(let s=0;s<c.length;s+=1){let h=ft(e,c,s),r=u(h);i.set(r,l[s]=ht(r,h))}return{c(){t=v("div"),n=v("div");for(let s=0;s<l.length;s+=1)l[s].c();g(n,"class","aplayer-lrc-contents svelte-afaxzx"),V(n,"transform","translateY(calc("+Math.max(e[7],0)+" * -1 * calc(var(--base-font-size) + 4px)))"),g(t,"class","aplayer-lrc svelte-afaxzx")},m(s,h){O(s,t,h),a(t,n);for(let r=0;r<l.length;r+=1)l[r].m(n,null)},p(s,h){h[0]&160&&(c=s[5],l=At(l,h,u,1,s,c,i,n,qt,ht,null,ft)),h[0]&128&&V(n,"transform","translateY(calc("+Math.max(s[7],0)+" * -1 * calc(var(--base-font-size) + 4px)))")},d(s){s&&P(t);for(let h=0;h<l.length;h+=1)l[h].d()}}}function ht(e,t){let n,l=t[75][1]+"",i,c;return{key:e,first:null,c(){n=v("p"),i=te(l),c=I(),g(n,"class","svelte-afaxzx"),re(n,"aplayer-lrc-current",t[77]===t[7]),this.first=n},m(u,s){O(u,n,s),a(n,i),a(n,c)},p(u,s){t=u,s[0]&32&&l!==(l=t[75][1]+"")&&pe(i,l),s[0]&160&&re(n,"aplayer-lrc-current",t[77]===t[7])},d(u){u&&P(n)}}}function en(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Xt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function tn(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Ft,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function nn(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Jt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function ln(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Wt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function sn(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Kt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function rn(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Gt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function on(e){let t,n;return{c(){t=new ge(!1),n=me(),t.a=n},m(l,i){t.m(Qt,l,i),O(l,n,i)},p:L,d(l){l&&P(n),l&&t.d()}}}function mt(e){let t,n,l;return{c(){t=v("button"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 22 32" class="svelte-afaxzx"><path d="M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z" class="svelte-afaxzx"></path></svg>',g(t,"type","button"),g(t,"class","aplayer-icon aplayer-icon-menu svelte-afaxzx")},m(i,c){O(i,t,c),n||(l=A(t,"click",e[58]),n=!0)},p:L,d(i){i&&P(t),n=!1,l()}}}function pt(e){let t;return{c(){t=v("span"),g(t,"class","aplayer-list-cur svelte-afaxzx")},m(n,l){O(n,t,l)},d(n){n&&P(t)}}}function gt(e){let t,n,l,i=e[74]+1+"",c,u,s,h=e[72].name+"",r,f,_,y=e[72].artist+"",b,k,D,m,p=e[74]===e[17].playingIndex&&pt();function w(){return e[59](e[74])}return{c(){t=v("li"),p&&p.c(),n=I(),l=v("span"),c=te(i),u=I(),s=v("span"),r=te(h),f=I(),_=v("span"),b=te(y),k=I(),g(l,"class","aplayer-list-index svelte-afaxzx"),g(s,"class","aplayer-list-title"),g(_,"class","aplayer-list-artist svelte-afaxzx"),g(t,"class","svelte-afaxzx")},m(T,G){O(T,t,G),p&&p.m(t,null),a(t,n),a(t,l),a(l,c),a(t,u),a(t,s),a(s,r),a(t,f),a(t,_),a(_,b),a(t,k),D||(m=A(t,"click",w),D=!0)},p(T,G){e=T,e[74]===e[17].playingIndex?p||(p=pt(),p.c(),p.m(t,n)):p&&(p.d(1),p=null),G[0]&16&&h!==(h=e[72].name+"")&&pe(r,h),G[0]&16&&y!==(y=e[72].artist+"")&&pe(b,y)},d(T){T&&P(t),p&&p.d(),D=!1,m()}}}function an(e){let t,n,l,i,c,u,s,h=e[6].name+"",r,f,_,y=e[6].artist+"",b,k,D,m,p,w,T,G,K,E,S,d,z,oe,_e,ye=e[20].ptime+"",be,we,ke,ce=e[20].duration+"",Ie,Re,R,Ye,$,ne,Be,Y,fe,ae,He,le,ze,J,Pe,Ne,ee,U,Ce,Ve;function Me(M,x){return M[1].paused?Zt:$t}let ue=Me(e),ie=ue(e),N=e[6].lrc&&dt(e);function Ue(M,x){return M[22].muted||M[1].muted?tn:en}let xe=Ue(e),Q=xe(e);function Xe(M,x){return M[18].order==="random"?ln:nn}let C=Xe(e),j=C(e);function Je(M,x){if(M[18].loop==="none")return on;if(M[18].loop==="one")return rn;if(M[18].loop==="all")return sn}let de=Je(e),X=de&&de(e),F=e[4].length>1&&mt(e),he=e[4],W=[];for(let M=0;M<he.length;M+=1)W[M]=gt(ct(e,he,M));return{c(){t=v("div"),n=v("div"),l=v("div"),ie.c(),i=I(),c=v("div"),u=v("div"),s=v("span"),r=te(h),f=I(),_=v("span"),b=te(y),k=I(),N&&N.c(),D=I(),m=v("div"),p=v("div"),w=v("div"),T=v("div"),G=I(),K=v("div"),E=v("div"),S=v("span"),d=I(),z=v("div"),oe=v("span"),_e=v("span"),be=te(ye),we=te(` /
            `),ke=v("span"),Ie=te(ce),Re=I(),R=v("span"),Ye=I(),$=v("div"),ne=v("button"),Q.c(),Be=I(),Y=v("div"),fe=v("div"),ae=v("div"),He=I(),le=v("button"),j.c(),ze=I(),J=v("button"),X&&X.c(),Pe=I(),F&&F.c(),Ne=I(),ee=v("div"),U=v("ol");for(let M=0;M<W.length;M+=1)W[M].c();g(l,"class","aplayer-pic svelte-afaxzx"),V(l,"background-image","url( "+e[6].cover+" )"),g(s,"class","aplayer-title svelte-afaxzx"),g(_,"class","aplayer-artist svelte-afaxzx"),g(u,"class","aplayer-music svelte-afaxzx"),g(T,"class","aplayer-loaded svelte-afaxzx"),V(T,"width",e[19].bufferPercentage),g(S,"class","aplayer-loading-icon"),V(S,"display",e[21]?"inline":"none"),g(E,"class","aplayer-thumb svelte-afaxzx"),g(K,"class","aplayer-played svelte-afaxzx"),V(K,"width",e[20].playPercentage),g(w,"class","aplayer-bar svelte-afaxzx"),g(p,"class","aplayer-bar-wrap svelte-afaxzx"),g(_e,"class","aplayer-ptime"),g(ke,"class","aplayer-dtime"),g(oe,"class","aplayer-time-inner svelte-afaxzx"),R.hidden=!0,g(ne,"type","button"),g(ne,"class","aplayer-icon aplayer-icon-volume-down svelte-afaxzx"),g(ae,"class","aplayer-volume svelte-afaxzx"),V(ae,"height",e[1].muted?"0px":e[22].volumePercentage),g(fe,"class","aplayer-volume-bar svelte-afaxzx"),g(Y,"class","aplayer-volume-bar-wrap svelte-afaxzx"),g($,"class","aplayer-volume-wrap svelte-afaxzx"),g(le,"type","button"),g(le,"class","aplayer-icon aplayer-icon-order svelte-afaxzx"),g(J,"type","button"),g(J,"class","aplayer-icon aplayer-icon-loop svelte-afaxzx"),g(z,"class","aplayer-time svelte-afaxzx"),g(m,"class","aplayer-controller svelte-afaxzx"),g(c,"class","aplayer-info svelte-afaxzx"),g(U,"class","svelte-afaxzx"),g(ee,"class","aplayer-list svelte-afaxzx"),V(ee,"height",e[18].showList?`${e[16]}px`:"0px"),g(n,"class","aplayer-body  svelte-afaxzx"),g(t,"class","aplayer svelte-afaxzx"),re(t,"aplayer-withlrc",e[5].length>0),re(t,"aplayer-withlist",e[4].length>1),re(t,"aplayer-narrow",e[0]),re(t,"aplayer-mobile",Ct)},m(M,x){O(M,t,x),a(t,n),a(n,l),ie.m(l,null),a(n,i),a(n,c),a(c,u),a(u,s),a(s,r),a(u,f),a(u,_),a(_,b),a(c,k),N&&N.m(c,null),a(c,D),a(c,m),a(m,p),a(p,w),a(w,T),a(w,G),a(w,K),a(K,E),a(E,S),S.innerHTML=Vt,e[53](p),a(m,d),a(m,z),a(z,oe),a(oe,_e),a(_e,be),a(oe,we),a(oe,ke),a(ke,Ie),a(z,Re),a(z,R),a(z,Ye),a(z,$),a($,ne),Q.m(ne,null),a($,Be),a($,Y),a(Y,fe),a(fe,ae),e[55](fe),a(z,He),a(z,le),j.m(le,null),a(z,ze),a(z,J),X&&X.m(J,null),a(z,Pe),F&&F.m(z,null),a(n,Ne),a(n,ee),a(ee,U);for(let B=0;B<W.length;B+=1)W[B].m(U,null);e[60](ee),e[61](t),Ce||(Ve=[A(l,"click",e[52]),A(p,"mousedown",function(){H(e[13])&&e[13].apply(this,arguments)}),A(p,"mousemove",function(){H(e[14])&&e[14].apply(this,arguments)}),A(p,"mouseup",function(){H(e[15])&&e[15].apply(this,arguments)}),A(p,"mouseleave",function(){H(e[15])&&e[15].apply(this,arguments)}),A(p,"touchstart",function(){H(e[13])&&e[13].apply(this,arguments)}),A(p,"touchmove",function(){H(e[14])&&e[14].apply(this,arguments)}),A(p,"touchend",function(){H(e[15])&&e[15].apply(this,arguments)}),A(ne,"click",e[54],!0),A(Y,"mousedown",function(){H(e[10])&&e[10].apply(this,arguments)}),A(Y,"mousemove",function(){H(e[11])&&e[11].apply(this,arguments)}),A(Y,"mouseup",function(){H(e[12])&&e[12].apply(this,arguments)}),A(Y,"mouseleave",function(){H(e[12])&&e[12].apply(this,arguments)}),A(Y,"touchstart",function(){H(e[10])&&e[10].apply(this,arguments)}),A(Y,"touchmove",function(){H(e[11])&&e[11].apply(this,arguments)}),A(Y,"touchend",function(){H(e[12])&&e[12].apply(this,arguments)}),A(le,"click",e[56]),A(J,"click",e[57])],Ce=!0)},p(M,x){if(e=M,ue!==(ue=Me(e))&&(ie.d(1),ie=ue(e),ie&&(ie.c(),ie.m(l,null))),x[0]&64&&V(l,"background-image","url( "+e[6].cover+" )"),x[0]&64&&h!==(h=e[6].name+"")&&pe(r,h),x[0]&64&&y!==(y=e[6].artist+"")&&pe(b,y),e[6].lrc?N?N.p(e,x):(N=dt(e),N.c(),N.m(c,D)):N&&(N.d(1),N=null),x[0]&524288&&V(T,"width",e[19].bufferPercentage),x[0]&2097152&&V(S,"display",e[21]?"inline":"none"),x[0]&1048576&&V(K,"width",e[20].playPercentage),x[0]&1048576&&ye!==(ye=e[20].ptime+"")&&pe(be,ye),x[0]&1048576&&ce!==(ce=e[20].duration+"")&&pe(Ie,ce),xe===(xe=Ue(e))&&Q?Q.p(e,x):(Q.d(1),Q=xe(e),Q&&(Q.c(),Q.m(ne,null))),x[0]&4194306&&V(ae,"height",e[1].muted?"0px":e[22].volumePercentage),C===(C=Xe(e))&&j?j.p(e,x):(j.d(1),j=C(e),j&&(j.c(),j.m(le,null))),de===(de=Je(e))&&X?X.p(e,x):(X&&X.d(1),X=de&&de(e),X&&(X.c(),X.m(J,null))),e[4].length>1?F?F.p(e,x):(F=mt(e),F.c(),F.m(z,null)):F&&(F.d(1),F=null),x[0]&131090){he=e[4];let B;for(B=0;B<he.length;B+=1){const Ge=ct(e,he,B);W[B]?W[B].p(Ge,x):(W[B]=gt(Ge),W[B].c(),W[B].m(U,null))}for(;B<W.length;B+=1)W[B].d(1);W.length=he.length}x[0]&327680&&V(ee,"height",e[18].showList?`${e[16]}px`:"0px"),x[0]&32&&re(t,"aplayer-withlrc",e[5].length>0),x[0]&16&&re(t,"aplayer-withlist",e[4].length>1),x[0]&1&&re(t,"aplayer-narrow",e[0])},i:L,o:L,d(M){M&&P(t),ie.d(),N&&N.d(),e[53](null),Q.d(),e[55](null),j.d(),X&&X.d(),F&&F.d(),yt(W,M),e[60](null),e[61](null),Ce=!1,Ee(Ve)}}}function un(e,t,n){let l,i,c,u,s,h,r,f,_,y,b,k,D,m,p,w,T,G;const K=Fe(),E=xt(),S=(o,se)=>{E(o,se),K.dispatchEvent&&K.dispatchEvent(new CustomEvent(o,{detail:se}))},{player:d,playList:z,audioList:oe,currentSong:_e,rdTime:ye,currentTime:be,duration:we,rdBufTime:ke,wtBufTime:ce,loading:Ie,lrc:Re,controlState:R,volumeState:Ye}=Ot(S);Z(e,z,o=>n(17,r=o)),Z(e,oe,o=>n(4,_=o)),Z(e,_e,o=>n(6,m=o)),Z(e,ye,o=>n(20,w=o)),Z(e,be,o=>n(66,D=o)),Z(e,we,o=>n(64,y=o)),Z(e,ke,o=>n(19,p=o)),Z(e,ce,o=>n(65,b=o)),Z(e,Ie,o=>n(21,T=o)),Z(e,Re,o=>n(5,k=o)),Z(e,R,o=>n(18,f=o)),Z(e,Ye,o=>n(22,G=o));let{audio:$}=t,{order:ne=f.order}=t,{loop:Be=f.loop}=t,{volume:Y=f.volume}=t,{mini:fe=!1}=t,{mutex:ae=!0}=t,{autoplay:He=!1}=t,{theme:le="#fadfa3"}=t,{list_max_height:ze=1/0}=t,J,Pe=!1,{base_font_size:Ne="12"}=t;const ee=()=>{ae&&ut.forEach(o=>o.pause()),d.play().catch(o=>{console.error(o)})};let U=-1;d.addEventListener("timeupdate",()=>{if(q(be,D=d.currentTime,D),h.includes("lrc")){for(;U>0&&d.currentTime<k[U][0];)n(7,U--,U);for(;U+1<k.length&&d.currentTime>=k[U+1][0];)n(7,U++,U)}}),d.addEventListener("volumechange",()=>{q(R,f.volume=d.volume,f)}),d.addEventListener("loadedmetadata",()=>{q(we,y=d.duration,y)}),d.addEventListener("error",()=>{console.warn("An audio error has occurred, player will skip forward in 2 seconds."),_.length>1&&setTimeout(()=>{q(z,r.playingIndex=(r.playingIndex+1)%_.length,r),d.paused&&ee()},2e3)});const Ce=()=>{const o=d.buffered.length?d.buffered.end(d.buffered.length-1):0;q(ce,b=o,b)};d.addEventListener("progress",Ce),d.addEventListener("canplay",Ce),d.addEventListener("durationchange",()=>{q(we,y=d.duration,y)});const Ve=()=>{const o=_,se=(r.playingIndex+1)%o.length;if(f.loop==="none"){if(f.order==="list")r.playingIndex<o.length-1?(q(z,r.playingIndex=se,r),n(1,d.currentTime=0,d)):(q(z,r.playingIndex=(r.playingIndex+1)%o.length,r),n(46,J=!0),d.pause());else if(f.order==="random"){const vt=Math.floor(o.length*Math.random());vt===r.playingIndex?q(z,r.playingIndex=se,r):q(z,r.playingIndex=vt,r),n(1,d.currentTime=0,d)}}else f.loop==="one"?n(1,d.currentTime=0,d):f.loop==="all"&&q(z,r.playingIndex=se,r)};d.addEventListener("ended",()=>{d.paused||Ve()});let Me,ue,ie,N,Ue,xe,Q,Xe,C,j;zt(()=>{location.hostname==="localhost"&&window&&(window.theAudio=d);const o=Yt(d,Me);n(10,ie=o.volumeDragStart),n(11,N=o.volumeDragMove),n(12,Ue=o.volumeDragEnd);const se=Ut(d,ue);n(13,xe=se.progressDragStart),n(14,Q=se.progressDragMove),n(15,Xe=se.progressDragEnd),C==null||C.addEventListener("transitionend",()=>{n(16,c=Math.min((C==null?void 0:C.scrollHeight)??0,ze))})}),Mt(()=>{S("destroy")});const Je=()=>{d.paused?ee():d.pause()};function de(o){Se[o?"unshift":"push"](()=>{ue=o,n(9,ue)})}const X=()=>{n(1,d.muted=!d.muted,d)};function F(o){Se[o?"unshift":"push"](()=>{Me=o,n(8,Me)})}const he=()=>{q(R,f.order=f.order==="list"?"random":"list",f)},W=()=>{f.loop==="all"?q(R,f.loop="one",f):f.loop==="one"?q(R,f.loop="none",f):f.loop==="none"&&q(R,f.loop="all",f)},M=()=>{q(R,f.showList=!f.showList,f),f.showList?S("listshow"):S("listhide")},x=o=>{q(z,r.playingIndex=o,r),n(1,d.currentTime=0,d)};function B(o){Se[o?"unshift":"push"](()=>{C=o,n(2,C)})}function Ge(o){Se[o?"unshift":"push"](()=>{j=o,n(3,j)})}return e.$$set=o=>{n(71,t=Te(Te({},t),lt(o))),"audio"in o&&n(37,$=o.audio),"order"in o&&n(38,ne=o.order),"loop"in o&&n(39,Be=o.loop),"volume"in o&&n(40,Y=o.volume),"mini"in o&&n(0,fe=o.mini),"mutex"in o&&n(41,ae=o.mutex),"autoplay"in o&&n(42,He=o.autoplay),"theme"in o&&n(43,le=o.theme),"list_max_height"in o&&n(44,ze=o.list_max_height),"base_font_size"in o&&n(45,Ne=o.base_font_size)},e.$$.update=()=>{e.$$.dirty[1]&67648&&(Pe?n(46,J=!0):n(46,J=!He),n(47,Pe=!0)),e.$$.dirty[1]&64&&n(51,l=typeof $=="string"?JSON.parse($):$),e.$$.dirty[1]&1048576&&q(z,r.audio=Array.isArray(l)?l:[l],r),n(50,i=!jt(t,"list_folded")&&_.length>1),e.$$.dirty[1]&524288&&q(R,f.showList=i,f),e.$$.dirty[1]&256&&q(R,f.loop=Be,f),e.$$.dirty[1]&128&&q(R,f.order=ne,f),e.$$.dirty[1]&512&&q(R,f.volume=Y,f),e.$$.dirty[0]&4|e.$$.dirty[1]&8192&&n(16,c=Math.min((C==null?void 0:C.scrollHeight)??0,ze)),e.$$.dirty[1]&512&&n(1,d.volume=Y,d),e.$$.dirty[0]&64&&n(1,d.src=m.url,d),e.$$.dirty[0]&64|e.$$.dirty[1]&4096&&n(49,u=m.theme??le),e.$$.dirty[1]&16384&&n(48,s=String(Ne).match(/^\d+/)[0]+"px"),e.$$.dirty[0]&8|e.$$.dirty[1]&393216&&j&&(j.style.setProperty("--theme-color",u),j.style.setProperty("--base-font-size",s)),e.$$.dirty[0]&32&&(h=k&&k.length>0?"withlrc":""),e.$$.dirty[0]&2|e.$$.dirty[1]&32768&&(d.src,n(7,U=-1),J||ee(),n(46,J=!1))},t=lt(t),[fe,d,C,j,_,k,m,U,Me,ue,ie,N,Ue,xe,Q,Xe,c,r,f,p,w,T,G,S,z,oe,_e,ye,be,we,ke,ce,Ie,Re,R,Ye,ee,$,ne,Be,Y,ae,He,le,ze,Ne,J,Pe,s,u,i,l,Je,de,X,F,he,W,M,x,B,Ge]}class cn extends Pt{constructor(t){super(),Ht(this,t,un,an,tt,{audio:37,order:38,loop:39,volume:40,mini:0,mutex:41,autoplay:42,theme:43,list_max_height:44,base_font_size:45},null,[-1,-1,-1])}}return cn});
